<?xml version="1.0" encoding="UTF-8"?>

<actionGroups xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
              xsi:noNamespaceSchemaLocation="urn:magento:mftf:Test/etc/actionGroupSchema.xsd">
    <actionGroup name="AdminAddAllowAddDescriptionActionGroup">
        <annotations>
            <description>Goes to the Admin Customers grid page. Click Allow Add description toggle</description>
        </annotations>
        <arguments>
            <argument name="customer"/>
        </arguments>

        <amOnPage url="{{AdminCustomerPage.url}}" stepKey="navigateToCustomers"/>
        <waitForPageLoad stepKey="waitForPageLoad1"/>

        <!--Select created customer, Click Edit mode-->
        <conditionalClick selector="{{AdminDataGridHeaderSection.clearFilters}}" dependentSelector="{{AdminDataGridHeaderSection.clearFilters}}" visible="true" stepKey="clearExistingOrderFilters"/>
        <click selector="{{AdminCustomerFiltersSection.filtersButton}}" stepKey="openFilter"/>
        <fillField userInput="{{customer.email}}" selector="{{AdminCustomerFiltersSection.emailInput}}" stepKey="filterEmail"/>
        <click selector="{{AdminCustomerFiltersSection.apply}}" stepKey="applyFilter"/>
        <waitForPageLoad stepKey="waitForPageLoad2"/>
        <click selector="{{AdminCustomerGridSection.firstRowEditLink}}" stepKey="clickEdit"/>
        <waitForPageLoad stepKey="waitForPageLoad3"/>

        <!--Select Account information tab-->
        <click selector="{{AdminCustomerInformationSection.accountInformation}}" stepKey="openAccountInfoTabOfFirstCustomer"/>
        <waitForPageLoad stepKey="waitForAccountInfoOfFirstCustomer"/>
        <seeElement selector="{{AdminCustomerInformationTabSection.customerAllowAddDescription}}" stepKey="assertThatToggleDisplayed"/>ed"/>

        <!-- Enable addting additional description for customer -->
        <click selector="{{AdminCustomerInformationTabSection.enableAllowAddDescription}}" stepKey="toggleEnabled"/>

        <!-- Save updated customer -->
        <seeCheckboxIsChecked selector="{{AdminCustomerInformationTabSection.customerAllowAddDescription}}" stepKey="assertThatToggleEnabled"/>
        <click selector="{{AdminCustomerMainActionsSection.saveButton}}" stepKey="clickSaveButton"/>
    </actionGroup>
</actionGroups>
